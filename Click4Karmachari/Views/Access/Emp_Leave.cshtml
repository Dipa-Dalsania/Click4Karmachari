@using ClickKarmachari;
@{
    ViewBag.Title = "Emp_Leave";
    Layout = "~/Views/Access/Access_Layout.cshtml";
    List<UserMaster> user = ViewBag.user;
    int i = 0;
}


<!--Page header-->
<div class="page-header d-xl-flex d-block">
    <div class="page-leftheader">
        <h4 class="page-title">Add Leaves</h4>
    </div>
    <div class="page-rightheader ml-md-auto">
        <div class="align-items-end flex-wrap my-auto right-content breadcrumb-right">
            <div class="btn-list">
              
            </div>
        </div>
    </div>
</div>
<!--End Page header-->
<!-- Row -->
<div class="row">
    <div class="col-xl-12 col-md-12 col-lg-12">
        <div class="card">
            <div class="card-header  border-0">
                <h4 class="card-title"></h4>
            </div>
            @using (Ajax.BeginForm("Emp_Leave", "Access", new AjaxOptions { HttpMethod = "POST", OnSuccess = "OnUpdateAdminLeave" }, new { @id = "form", @enctype = "multipart/form-data", @role = "form", @onsubmit = "submitleave()" }))
            {
                @Html.AntiForgeryToken()
        <div class="card-body">
            <div class="row">
                <div class="col-md-12 col-xl-5">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="form-group">
                                <label class="form-label">Leaves Type <span class="text-red">*</span></label>
                                <div class="input-group">
                                    <select name="Leave_Type" class="form-control custom-select select2" id="Leave_Type" data-placeholder="Select Type" required>
                                        <option value="">Select Type</option>
                                        <option value="LWPS">LWPS</option>
                                        <option value="PL">PL</option>
                                        <option value="CL">CL</option>
                                        <option value="EL">EL</option>
                                        <option value="SL">SL</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="form-label">Days <span class="text-red">*</span></label>
                                <div class="input-group">
                                    <input type="number" id="Total_Days" class="form-control" min="1" required value="0" name="Total_Days" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12 col-xl-6">
                    <div class="form-group">
                        <label class="form-label">Reason <span class="text-red">*</span></label>
                        <textarea name="reason" id="reason" required class="form-control" rows="1" cols="30" placeholder="Reason"></textarea>
                    </div>
                </div>
            </div>
            <div class="col-md-12"></div>
            <div class="card-body">
                <div class="col-md-8 col-xl-8 col-lg-8 col-sm-12 col-12">
                    <div class="table-responsive" style="overflow-x:unset !important;width:100%;">
                        <table id="basic-datatable1" class="table table-striped table-bordered border-bottom table-hover">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th><label class="form-label">Employee Name</label></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="align-middle w-5">
                                        <label class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input" id="Emp_Id_@i" name="Emp_Id_@i" onClick="check_uncheck_checkbox(this.checked);" value="0" />
                                            <span class="custom-control-label"></span>
                                        </label>
                                    </td>
                                    <td class="align-middle" style="text-transform: capitalize">
                                        <label>All</label>
                                    </td>
                                </tr>
                                @foreach (UserMaster _u in user)
                                {
                                    i++;

                                    if (_u.User_type != 21)
                                    {
                                        <tr>
                                            <td class="align-middle w-5">
                                                <label class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="Emp_Id_@i" name="Emp_Id_@i" value="@_u.User_ID" />
                                                    <span class="custom-control-label"></span>
                                                </label>
                                            </td>
                                            <td style="text-transform: capitalize">
                                                <label>@_u.User_Name</label>
                                            </td>

                                        </tr>
                                    }
                                }
                                <input type="hidden" name="Emp_Total" id="Emp_Total" value="@i" />
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
                <br/>
                <div class="card-footer">
                    <div class="text-right">
                        <button type="submit" id="savebtn" name="Command" value="Save" class="btn btn-primary"><i class="feather feather-save"></i>&ensp;Save</button>
                    </div>
                </div>
           
        </div>
            }
            </div>
    </div>
</div>
<!-- End Row-->

<script>
    function check_uncheck_checkbox(isChecked) {
        if (isChecked) {
            $('input[type="checkbox"]').each(function () {
                this.checked = true;
            });
        } else {
            $('input[type="checkbox"]').each(function () {
                this.checked = false;
            });
        }
    }
    var isSubmitted = false;
    //alert(isSubmitted);
    function stopMultipleSubmitLeave() {
        if (!isSubmitted) {
            $("#savebtn").prop('disabled', true);
            isSubmitted = true;
            //alert(isSubmitted);
            return true;
        }
        else {
            $("#savebtn").prop('disabled', false);
            isSubmitted = false;
            //alert(isSubmitted);
            return false;
        }
    }
    function submitleave() {
        //    var Address_Value = $("#Address_address").val();
        //if (Address_Value == "") {
        //}
        //    else {
        stopMultipleSubmitLeave();
        /*}*/

        return isSubmitted;
    }
</script>
