@using ClickKarmachari;
@{
    UserMaster _LogedUser = (UserMaster)Session["LOGIN_USER"];
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Access/Access_Layout.cshtml";
}

<div class="content animate-panel">
    <div class="row">
        <div class="col-lg-12 text-center m-t-md">
            <h2>
                <b>Welcome to Satyam Group</b>
            </h2>
            <br />
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6">
            <div class="hpanel">
                <div class="panel-heading">
                    <div class="panel-tools">
                        <a class="showhide"><i class="fa fa-chevron-up"></i></a>
                        <a class="closebox"><i class="fa fa-times"></i></a>
                    </div>
                    Task Report - Monthly
                </div>
                <div class="panel-body">
                    <div>
                        @*@if (ViewBag.cproject == 0 && ViewBag.reqproject == 0 && ViewBag.comproject == 0)
        {
            <h3 style="align-content:center"><b>NO Data</b></h3>
        }*@
                        <canvas id="lineOptions" height="140"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="hpanel">
                <div class="panel-heading">
                    <div class="panel-tools">
                        <a class="showhide"><i class="fa fa-chevron-up"></i></a>
                        <a class="closebox"><i class="fa fa-times"></i></a>
                    </div>
                    Attendance Report-Weekly
                </div>
                <div class="panel-body">
                    <div>
                      
                        <canvas id="singleBarOptions" height="140"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-3">
            <input type="hidden" name="Sunday" id="Sunday" value="@ViewBag.Sunday" />
            <input type="hidden" name="Monday" id="Monday" value="@ViewBag.Monday" />
            <input type="hidden" name="Tuesday" id="Tuesday" value="@ViewBag.Tuesday" />
            <input type="hidden" name="Wednesday" id="Wednesday" value="@ViewBag.Wednesday" />
            <input type="hidden" name="Thursday" id="Thursday" value="@ViewBag.Thursday" />
            <input type="hidden" name="Friday" id="Friday" value="@ViewBag.Friday" />
            <input type="hidden" name="Saturday" id="Saturday" value="@ViewBag.Saturday" />

            <input type="hidden" name="jan" id="jan" value="@ViewBag.jan" />
            <input type="hidden" name="feb" id="feb" value="@ViewBag.feb " />
            <input type="hidden" name="mar" id="mar" value="@ViewBag.mar " />
            <input type="hidden" name="april" id="april" value="@ViewBag.april" />
            <input type="hidden" name="may" id="may" value="@ViewBag.may" />
            <input type="hidden" name="jun" id="jun" value="@ViewBag.jun " />
            <input type="hidden" name="july" id="july" value="@ViewBag.july" />
            <input type="hidden" name="aug" id="aug" value="@ViewBag.aug" />
            <input type="hidden" name="sep" id="sep" value="@ViewBag.sep" />
            <input type="hidden" name="oct" id="oct" value="@ViewBag.oct" />
            <input type="hidden" name="nov" id="nov" value="@ViewBag.nov" />
            <input type="hidden" name="dec" id="dec" value="@ViewBag.dec" />


            <input type="hidden" name="cproject" id="cproject" value="@ViewBag.cproject" />
            <input type="hidden" name="reqproject" id="reqproject" value="@ViewBag.reqproject" />
            <input type="hidden" name="comproject" id="comproject" value="@ViewBag.comproject" />

            <div class="hpanel">
                <div class="panel-body text-center h-200">
                    <img src="~/img/employee (3).png">

                    <a href="~/Access/Employee_All" />
                    <h1 class="m-xs"> @ViewBag.Emp </h1>
                    <h3 class="font-extra-bold no-margins text-success">
                        Employeess
                    </h3>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="hpanel">
                <div class="panel-body text-center h-200">
                    <img src="~/img/Project(2).png" style="height: 55px;width: 55px;">
                    <a href="~/Access/Project_List" />
                    <h1 class="m-xs"> @ViewBag.Projects </h1>
                    <h3 class="font-extra-bold no-margins text-success">
                        Projects
                    </h3>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="hpanel">
                <div class="panel-body text-center h-200">
                    <img src="~/img/checklist.png" style="height: 55px;width: 55px;">
                    <a href="~/Access/Project_Task_List?status=4" />
                    <h1 class="m-xs">@ViewBag.Runproject</h1>
                    <h3 class="font-extra-bold no-margins text-success">
                        On Going Task
                    </h3>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="hpanel">
                <div class="panel-body text-center h-200">
                    <img src="~/img/task(1).png" style="height: 60px;width: 60px;">
                    <a href="~/Access/Project_Task_List?status=0" />
                    <h1 class="m-xs">@ViewBag.NewProject</h1>
                    <h3 class="font-extra-bold no-margins text-success">
                        New Task Request
                    </h3>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="hpanel">
                <div class="panel-body text-center h-200">
                    <img src="~/img/voucher.png" style="height: 55px;width: 55px;">
                    <a href="~/Access/VoucherReq_List?status=0" />
                    <h1 class="m-xs">@ViewBag._pendingVoucher</h1>
                    <h3 class="font-extra-bold no-margins text-success">
                        Voucher Request
                    </h3>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="hpanel">
                <div class="panel-body text-center h-200">
                    <img src="~/img/voucher.png" style="height: 55px;width: 55px;">
                    <a href="~/Access/AdvanceReq_List?status=0" />
                    <h1 class="m-xs">@ViewBag._pendingRequest</h1>
                    <h3 class="font-extra-bold no-margins text-success">
                        Advance Request
                    </h3>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="hpanel">
                <div class="panel-body text-center h-200">
                    <img src="~/img/assets.png" style="height: 55px;width: 55px;">
                    <a href="~/Access/Asset_List" />
                    <h1 class="m-xs">@ViewBag.Asset</h1>
                    <h3 class="font-extra-bold no-margins text-success">
                        My Assets
                    </h3>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="hpanel">
                <div class="panel-body text-center h-200">
                    <img src="~/img/check-out.png" style="height: 55px;width: 55px;">
                    <a href="#" />
                    <h1 class="m-xs">0</h1>
                    <h3 class="font-extra-bold no-margins text-success">
                        Leave Request
                    </h3>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6">
            <div class="hpanel">
                <div class="panel-heading">
                    <div class="panel-tools">
                        <a class="showhide"><i class="fa fa-chevron-up"></i></a>
                        <a class="closebox"><i class="fa fa-times"></i></a>
                    </div>
                    Today's Present Employees
                </div>
                <div class="panel-body list">
                    <div class="table-responsive project-list">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Employee Name</th>
                                    <th>Checkin Time</th>
                                    <th>Location</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (ViewBag._todayspunch != null)
                                {
                                    foreach (User_Punch _punch in ViewBag._todayspunch)
                                    {
                                        <tr>
                                            <td>@_punch.UserMaster.User_Name</td>
                                            <td>@_punch.Time</td>
                                            <td>@_punch.Location</td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="hpanel">
                <div class="panel-heading">
                    <div class="panel-tools">
                        <a class="showhide"><i class="fa fa-chevron-up"></i></a>
                        <a class="closebox"><i class="fa fa-times"></i></a>
                    </div>
                    Pending Leave Request
                </div>
                <div class="panel-body list">
                    <div class="table-responsive project-list">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Employee Name</th>
                                    <th>Date Range</th>
                                    <th>Days</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (ViewBag._pendingLeave != null)
                                {
                                    foreach (Leave_Master _leave in ViewBag._pendingLeave)
                                    {
                                        <tr>
                                            <td>@_leave.UserMaster.User_Name</td>
                                            <td>@_leave.From_Date.ToString("dd/MM/yyyy") to @_leave.To_Date.ToString("dd/MM/yyyy") </td>
                                            <td>@_leave.leave_days</td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday;
    Sunday = document.getElementById("Sunday").value;
    Monday = document.getElementById("Monday").value;
    Tuesday = document.getElementById("Tuesday").value;
    Wednesday = document.getElementById("Wednesday").value;
    Thursday = document.getElementById("Thursday").value;
    Friday = document.getElementById("Friday").value;
    Saturday = document.getElementById("Saturday").value;

    /**
      * Options for Bar chart
      */
    var singleBarOptions = {
        scaleBeginAtZero: true,
        scaleShowGridLines: true,
        scaleGridLineColor: "rgba(0,0,0,.05)",
        scaleGridLineWidth: 1,
        barShowStroke: true,
        barStrokeWidth: 1,
        barValueSpacing: 10,
        barDatasetSpacing: 1,
        responsive: true
    };

    /**
     * Data for Bar chart
     */
    var singleBarData = {
        labels: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
        datasets: [
            {
                label: "My Second dataset",
                fillColor: "rgba(98,203,49,0.5)",
                strokeColor: "rgba(98,203,49,0.8)",
                highlightFill: "rgba(98,203,49,0.75)",
                highlightStroke: "rgba(98,203,49,1)",
                data: [Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday]
            }
        ]
    };

    var ctx = document.getElementById("singleBarOptions").getContext("2d");
    var myNewChart = new Chart(ctx).Bar(singleBarData, singleBarOptions);

    var jan, feb, mar, april, may, jun, july,aug,sep,oct,nov,dec;
    jan = document.getElementById("jan").value;
    feb = document.getElementById("feb").value;
    mar = document.getElementById("mar").value;
    april = document.getElementById("april").value;
    may = document.getElementById("may").value;
    jun = document.getElementById("jun").value;
    july = document.getElementById("july").value;
    aug = document.getElementById("aug").value;
    sep = document.getElementById("sep").value;
    oct = document.getElementById("oct").value;
    nov = document.getElementById("nov").value;
    dec = document.getElementById("dec").value;

    var lineData = {
        labels: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November","December"],
        datasets: [
            {
                label: "Example dataset",
                fillColor: "rgba(220,220,220,0.5)",
                strokeColor: "rgba(220,220,220,1)",
                pointColor: "rgba(220,220,220,1)",
                pointStrokeColor: "#fff",
                pointHighlightFill: "#fff",
                pointHighlightStroke: "rgba(220,220,220,1)",
                data: [jan, feb, mar, april, may, jun, july, aug, sep, oct, nov, dec]
            }
           
        ]
    };

    var lineOptions = {
        scaleShowGridLines: true,
        scaleGridLineColor: "rgba(0,0,0,.05)",
        scaleGridLineWidth: 1,
        bezierCurve: true,
        bezierCurveTension: 0.4,
        pointDot: true,
        pointDotRadius: 4,
        pointDotStrokeWidth: 1,
        pointHitDetectionRadius: 20,
        datasetStroke: true,
        datasetStrokeWidth: 1,
        datasetFill: true,
        responsive: true
    };


    var ctx = document.getElementById("lineOptions").getContext("2d");
    var myNewChart = new Chart(ctx).Line(lineData, lineOptions);
</script>